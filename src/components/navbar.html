<header class="channel-header">
    <div class="channel-info">
        <div class="channel-name" id="channelName">Мой канал</div>
    </div>
    
    <nav class="channel-nav">
        <a href="../myVideo/index.html" class="nav-link" id="navMyVideos">Мои видео</a>
        <a href="../team/index.html" class="nav-link" id="navTeam">Команда</a>
        <!-- Настройки показываются только для OWNER -->
        <a href="../settings/index.html" class="nav-link" id="navSettings" style="display: none;">Настройки</a>
    </nav>
    
    <div class="header-actions">
        <div class="user-menu">
            <div class="username" id="username" onclick="goToProfile()">Имя пользователя</div>
            <div class="dropdown-content">
                <a href="#" onclick="logout()">Выйти из аккаунта</a>
            </div>
        </div>
    </div>
</header>

<style>
    :root {
        --dark-bg: #1a1a1a;
        --dark-card: #2d2d2d;
        --dark-text: #e0e0e0;
        --accent-red: #c62828;
        --accent-light: #ff5252;
        --border-color: #404040;
    }

    .channel-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px 0;
        border-bottom: 1px solid var(--border-color);
        margin-bottom: 30px;
    }

    .channel-info {
        flex: 1;
    }

    .channel-name {
        font-size: 24px;
        font-weight: bold;
        color: var(--accent-red);
    }

    .channel-nav {
        display: flex;
        gap: 30px;
        flex: 2;
        justify-content: center;
    }

    .nav-link {
        color: var(--dark-text);
        text-decoration: none;
        padding: 8px 16px;
        border-radius: 6px;
        transition: all 0.3s ease;
        font-weight: 500;
    }

    .nav-link:hover,
    .nav-link.active {
        background-color: var(--accent-red);
        color: white;
    }

    .header-actions {
        display: flex;
        align-items: center;
        flex: 1;
        justify-content: flex-end;
    }

    .user-menu {
        position: relative;
        display: inline-block;
    }

    .username {
        font-weight: 500;
        font-size: 14px;
        cursor: pointer;
        padding: 8px 16px;
        border-radius: 6px;
        transition: all 0.3s ease;
    }

    .username:hover {
        background-color: var(--accent-red);
        color: white;
    }

    .dropdown-content {
        display: none;
        position: absolute;
        right: 0;
        background-color: var(--dark-card);
        min-width: 180px;
        box-shadow: 0 8px 16px rgba(0,0,0,0.3);
        z-index: 1;
        border-radius: 6px;
        overflow: hidden;
        border: 1px solid var(--border-color);
        margin-top: 5px;
    }

    .dropdown-content a {
        color: var(--dark-text);
        padding: 12px 16px;
        text-decoration: none;
        display: block;
        font-size: 14px;
        transition: background-color 0.3s ease;
    }

    .dropdown-content a:hover {
        background-color: var(--accent-red);
        color: white;
    }

    .user-menu:hover .dropdown-content {
        display: block;
    }

    /* Адаптивность */
    @media (max-width: 768px) {
        .channel-header {
            flex-direction: column;
            gap: 15px;
            text-align: center;
        }
        
        .channel-nav {
            gap: 15px;
        }
        
        .header-actions {
            justify-content: center;
        }
    }
</style>

<script>
    function goToProfile() {
        // Переход на страницу профиля с проектами
        window.location.href = '../../profile/index.html';
    }

    function logout() {
        if (confirm('Вы уверены, что хотите выйти из аккаунта?')) {
            localStorage.removeItem('token');
            localStorage.removeItem('currentChannel');
            localStorage.removeItem('username');
            localStorage.removeItem('userRole');
            localStorage.removeItem('userData');
            localStorage.removeItem('projectRoles');
            localStorage.removeItem('currentProjectId');
            localStorage.removeItem('authToken');
            localStorage.removeItem('userId');
            localStorage.removeItem('user');
            window.location.href = '../../index.html';
        }
    }

    // Загрузка данных пользователя и канала
    function loadUserData() {
        const userData = JSON.parse(localStorage.getItem('userData')) || { 
            username: 'Имя пользователя',
            role: 'EDITOR' // По умолчанию EDITOR, может быть OWNER
        };
        
        const channelData = JSON.parse(localStorage.getItem('currentChannel')) || {
            name: 'Мой канал'
        };

        // Обновляем имя пользователя
        const usernameElement = document.getElementById('username');
        if (usernameElement && userData.username) {
            usernameElement.textContent = userData.username;
        }

        // Обновляем название канала
        const channelName = document.getElementById('channelName');
        if (channelName) channelName.textContent = channelData.name;

        // Показываем настройки только для OWNER
        const navSettings = document.getElementById('navSettings');
        if (navSettings && LoginPage.getUserRole() === 'OWNER') {
            navSettings.style.display = 'block';
        }

        // Подсвечиваем активную страницу
        const currentPage = window.location.pathname.split('/').pop();
        const navLinks = {
            'index.html': 'navMyVideos',
            'team.html': 'navTeam',
            'settings.html': 'navSettings'
        };

        const activeNavId = navLinks[currentPage];
        if (activeNavId) {
            const activeNav = document.getElementById(activeNavId);
            if (activeNav) activeNav.classList.add('active');
        }
    }

    // Загружаем данные при подключении navbar
    document.addEventListener('DOMContentLoaded', loadUserData);
</script>